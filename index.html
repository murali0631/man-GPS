<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TRACKING WEBSITE</title>

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>

<style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
    header { background-color: #2c3e50; color: #fff; padding: 10px 0; }
    #map { height: 500px; width: 80%; margin: 20px auto; border: 2px solid #2c3e50; border-radius: 10px; }
    button { padding: 8px 12px; margin-top: 10px; cursor: pointer; }
</style>
</head>

<body>

<header>
    <h1>VIGNAN'S INSTITUTE OF INFORMATION TECHNOLOGY</h1>
</header>

<h2>Track Your Location</h2>
<button onclick="getLocation()">Share My Location</button>
<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // ðŸ”µ Your Firebase Config
    const firebaseConfig = {
       apiKey: "YOUR_API_KEY",
       authDomain: "your-project-id.firebaseapp.com",
       databaseURL: "https://your-project-id.firebaseio.com",
       projectId: "your-project-id",
       storageBucket: "your-project-id.appspot.com",
       messagingSenderId: "YOUR_SENDER_ID",
       appId: "YOUR_APP_ID"
    };

    // ðŸ”µ Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // ðŸ”µ Initialize Leaflet Map
    const map = L.map('map').setView([17.710833, 83.165278], 15);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 18 }).addTo(map);

    // ðŸ”µ Get User Location and Save to Firebase
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                // Update Map with User Location
                const userMarker = L.marker([lat, lon]).addTo(map)
                    .bindPopup("<b>Your Current Location</b>")
                    .openPopup();
                map.setView([lat, lon], 15);

                // Save Location to Firebase
                const locationData = { lat: lat, lon: lon, timestamp: Date.now() };
                database.ref('locations').push(locationData);
                alert("Location saved successfully!");

            }, () => { alert("Location access denied!"); });
        } else {
            alert("Geolocation is not supported by this browser.");
        }
    }
</script>

</body>
</html>
